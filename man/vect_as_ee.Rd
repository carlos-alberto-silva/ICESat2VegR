% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/vect_as_ee.R
\name{vect_as_ee}
\alias{vect_as_ee}
\title{Convert vector data to Google Earth Engine FeatureCollection (no rgee)}
\usage{
vect_as_ee(
  x,
  via = c("getInfo", "getInfo_to_asset"),
  assetId = NULL,
  overwrite = TRUE,
  proj = "EPSG:4326",
  make_valid = TRUE,
  quiet = FALSE,
  monitoring = TRUE,
  poll_interval_sec = 5,
  poll_timeout_sec = 3600
)
}
\arguments{
\item{x}{An input vector object: an \code{sf}, \code{sfc}, or \code{sfg} object, or a
\code{\link[terra:SpatVector-class]{terra::SpatVector}}. For \code{sfg}/\code{sfc}, a simple point/line/polygon geometry
is accepted; for \code{SpatVector}, it will be converted to \code{sf}.}

\item{via}{Character; one of \code{c("getInfo","getInfo_to_asset")}.
\itemize{
\item \code{"getInfo"} returns an in-memory \code{ee$FeatureCollection} built from the
GeoJSON of \code{x}.
\item \code{"getInfo_to_asset"} creates an EE export task to save the collection to
an Earth Engine \strong{Asset} (requires \code{assetId}).
}}

\item{assetId}{Character; EE asset id (e.g., \code{"users/you/my_fc"}). \strong{Required}
when \code{via = "getInfo_to_asset"}.}

\item{overwrite}{Logical; if \code{TRUE}, attempt to delete an existing EE asset at
\code{assetId} before export.}

\item{proj}{Character CRS string (e.g., \code{"EPSG:4326"}). Input will be
transformed to this CRS before conversion. Default is \code{"EPSG:4326"}.}

\item{make_valid}{Logical; if \code{TRUE}, attempt to repair invalid geometries
(\code{sf::st_make_valid()} / \code{terra::makeValid()}).}

\item{quiet}{Logical; if \code{FALSE}, print progress messages (e.g., task state).}

\item{monitoring}{Logical; when exporting to asset, if \code{TRUE} poll the task
until completion or timeout, otherwise return immediately after starting.}

\item{poll_interval_sec}{Numeric; seconds to wait between task status checks
when \code{monitoring = TRUE}. Default \code{5}.}

\item{poll_timeout_sec}{Numeric; maximum seconds to keep polling before
timing out. Default \code{3600} (1 hour).}
}
\value{
If \code{via = "getInfo"}, returns an in-memory \code{ee$FeatureCollection} object
(reticulate Python object). If \code{via = "getInfo_to_asset"}, returns an
\code{ee$FeatureCollection} \strong{referencing} \code{assetId} (after successful export),
or returns immediately if \code{monitoring = FALSE}.
}
\description{
\code{vect_as_ee()} converts vector data to a Google Earth Engine
\code{ee$FeatureCollection} using \strong{reticulate} to call the official Python
Earth Engine API-\strong{without} relying on \strong{rgee}. It accepts \code{sf}/\code{sfc}/\code{sfg}
objects or \code{\link[terra:SpatVector-class]{terra::SpatVector}}, validates and reprojects geometries, and
either returns an in-memory FeatureCollection or exports to an EE Asset.
}
\details{
\itemize{
\item The function converts \code{x} to \code{sf}, enforces a defined CRS, optionally fixes
invalid geometries, and transforms to \code{proj} (default WGS84).
\item Properties are carried alongside geometry; however, Earth Engine does not
accept \verb{POSIX*} timestamp columns or property names containing \code{'.'}. The
function stops with a clear error if such columns are found-convert them to
character or rename before calling.
\item GeoJSON is built in-memory (via \strong{geojsonsf} when available) or via a
temporary \code{.geojson} file as a fallback, then parsed to a list for
\code{ee$FeatureCollection}.
\item Requires a properly initialized EE Python environment (\code{ee.Initialize()}
in the active Python session used by \strong{reticulate}).
}
}
\section{Errors & Constraints}{

\itemize{
\item Undefined CRS: the function stops if \code{x} has no CRS set.
\item Unsupported columns: the function stops if any property is \verb{POSIX*} or if
names contain dots (\code{.}).
\item Export failures: if \code{via = "getInfo_to_asset"} and the EE task fails or is
cancelled, an error is thrown when \code{monitoring = TRUE}.
}
}

\examples{
\dontrun{
# -- Prerequisites (Python side):
# import ee; ee.Initialize()
#
# Example with sf POINTS
library(sf)
pts <- st_as_sf(data.frame(
  id = 1:3,
  x  = c(-84.02171, -84.02025, -84.02026),
  y  = c(31.29891, 31.31945, 31.31938)
), coords = c("x","y"), crs = "EPSG:4326")

# In-memory FeatureCollection:
fc <- vect_as_ee(pts, via = "getInfo")

# Export to an EE asset (monitor until done):
# fc_asset <- vect_as_ee(
#   pts,
#   via = "getInfo_to_asset",
#   assetId = "users/you/demo_points",
#   overwrite = TRUE,
#   monitoring = TRUE
# )
}

}
\seealso{
\itemize{
\item Earth Engine Python API docs: \code{ee$FeatureCollection}
\item Geometry repair: \code{\link[sf:valid]{sf::st_make_valid()}}, \code{\link[terra:is.valid]{terra::makeValid()}}
\item GeoJSON helpers: \strong{geojsonsf}, \code{\link[sf:st_write]{sf::st_write()}}
}
}
