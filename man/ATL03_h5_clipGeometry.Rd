% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ATL03_h5_clipGeometry.R
\name{ATL03_h5_clipGeometry}
\alias{ATL03_h5_clipGeometry}
\title{Clip ICESat-2 ATL03 HDF5 Data Using Geometry-Based Boundaries}
\usage{
ATL03_h5_clipGeometry(
  atl03,
  output,
  vect,
  split_by = NULL,
  beam = c("gt1r", "gt2r", "gt3r", "gt1l", "gt2l", "gt3l"),
  additional_groups = c("orbit_info")
)
}
\arguments{
\item{atl03}{An \code{\linkS4class{icesat2.atl03_h5}} object obtained using
\code{\link[=ATL03_read]{ATL03_read()}}, representing the ATL03 HDF5 file to be clipped.}

\item{output}{Character. Path to the output filename. The final written files
will append the unique value of \code{split_by} for each clipping geometry,
for example:
\code{"output_id1.h5"}, \code{"output_id2.h5"}, etc.}

\item{vect}{A \code{\link[terra:SpatVector-class]{terra::SpatVector}} object containing the geometric clip
boundaries. Each feature (row) in the SpatVector defines an independent
clipping region.}

\item{split_by}{Character. The SpatVector attribute whose values are used to
identify and name each clipping geometry. Defaults to \code{"id"}.}

\item{beam}{Character vector specifying which ATL03 beams to include. The
default includes all six beams:
\code{c("gt1l", "gt2l", "gt3l", "gt1r", "gt2r", "gt3r")}.}

\item{additional_groups}{Character vector of non-beam HDF5 groups that should
be copied unchanged into each clipped file. Defaults to:
\code{c("orbit_info")}.}
}
\value{
Returns a list of clipped S4 objects of class
\code{\linkS4class{icesat2.atl03_h5}}, one for each clipping geometry
contained in \code{vect}.
}
\description{
Clips an ICESat-2 ATL03 HDF5 file using one or more geometry-based clipping
objects provided as a \code{\link[terra:SpatVector-class]{terra::SpatVector}}. Each geometry in \code{vect}
defines an individual clipping region. The function iteratively clips the
ATL03 data for each region and writes a separate output HDF5 file for every
geometry. The name of each output file is automatically appended with the
value of the attribute specified in \code{split_by}.

Only datasets within the ATL03 beam groups are spatially clipped; metadata
and ancillary non-beam groups remain unchanged in the resulting files.
}
\examples{
# ATL03 file path
atl03_path <- system.file("extdata",
  "atl03_clip.h5",
  package = "ICESat2VegR"
)

# Read ATL03 file
atl03_h5 <- ATL03_read(atl03_path)

# Output base filename
output <- tempfile(fileext = ".h5")

# Load clipping geometries
vect_path <- system.file("extdata", "clip_objs.shp",
  package = "ICESat2VegR"
)
vect <- terra::vect(vect_path)

# Clip ATL03 data using polygon geometries
atl03_clipped_list <- ATL03_h5_clipGeometry(
  atl03_h5,
  output,
  vect,
  split_by = "id"
)

close(atl03_h5)

}
