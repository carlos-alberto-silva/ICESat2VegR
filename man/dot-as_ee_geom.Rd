% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/gee-base-list.R
\name{.as_ee_geom}
\alias{.as_ee_geom}
\title{Convert R geometry objects to an Earth Engine geometry}
\usage{
.as_ee_geom(geom, xcol = "lon", ycol = "lat", crs = 4326, buffer_m = NULL)
}
\arguments{
\item{geom}{Geometry input. Supported types include:
\itemize{
\item An Earth Engine python object (e.g. \code{ee$Geometry}, \code{ee$Feature},
\code{ee$FeatureCollection}). Features/FeatureCollections are
reduced to their geometry via \verb{$geometry()}.
\item An \code{sf} or \code{sfc} object.
\item A \code{terra::SpatVector}.
\item A \code{terra::SpatExtent} (or numeric vector of length 4 specifying
a bounding box as \code{c(xmin, ymin, xmax, ymax)}).
\item A \code{data.frame} with longitude/latitude columns (\code{xcol}, \code{ycol}).
\item A single-character WKT string.
\item A single-character GeoJSON string.
\item A parsed GeoJSON list with a non-\code{NULL} \code{type} element.
}}

\item{xcol}{Character. Name of the longitude column when \code{geom} is a
\code{data.frame}. Default is \code{"lon"}.}

\item{ycol}{Character. Name of the latitude column when \code{geom} is a
\code{data.frame}. Default is \code{"lat"}.}

\item{crs}{Coordinate reference system of the input geometry when \code{geom}
is an \code{sf}/\code{sfc} object or a \code{data.frame}. Can be any \code{sf}-compatible
CRS specification (default is EPSG 4326).}

\item{buffer_m}{Optional numeric. Buffer distance in meters applied to
the resulting Earth Engine geometry. If \code{NULL} (default) no buffering
is applied. For sf/data.frame inputs, buffering is done on the EE side
using \code{ee$Geometry$buffer()}.}
}
\value{
A Python \code{ee$Geometry} object (or compatible geometry-like EE object)
suitable for use in Earth Engine operations.
}
\description{
\code{.as_ee_geom()} converts a variety of R geometry representations
(including \code{sf}, \code{sfc}, \code{terra} objects, bounding boxes, WKT/GeoJSON,
and even existing Earth Engine python objects) into a Python
\code{ee$Geometry} suitable for use in Earth Engine workflows.

This helper is designed to be flexible and permissive: it accepts
most common spatial formats used in R and normalizes them into a
standard Earth Engine geometry. When a buffer distance is supplied,
the geometry is optionally buffered in meters on the Earth Engine side.
}
\details{
For \code{sf}/\code{sfc} and \code{data.frame} inputs, geometries are first transformed
to EPSG:4326 and written to a temporary GeoJSON file, which is then read
and wrapped into an \code{ee$FeatureCollection(... )$geometry()}. For
\code{terra::SpatVector} and \code{terra::SpatExtent} inputs, conversion proceeds
via \code{terra::writeVector()} / \code{terra::as.polygons()} and an EE rectangle
geometry, respectively.

Existing Earth Engine python objects are returned as-is, except that
\code{ee$Feature} and \code{ee$FeatureCollection} objects are coerced to their
underlying geometry via \verb{$geometry()}.
}
\examples{
\dontrun{
  ee <- reticulate::import("ee", delay_load = FALSE)

  # 1) From sf polygon
  library(sf)
  poly <- st_as_sfc(st_bbox(c(
    xmin = -82.4, xmax = -82.2,
    ymin =  29.6, ymax =  29.8
  ), crs = 4326))

  ee_geom1 <- .as_ee_geom(poly)


  # 2) From terra::SpatVector
  library(terra)
  v <- vect(system.file("extdata", "all_boundary.shp", package = "ICESat2VegR"))
  ee_geom2 <- .as_ee_geom(v, buffer_m = 30)


  # 3) From numeric extent (xmin, ymin, xmax, ymax)
  bbox_vec <- c(-82.4, 29.6, -82.2, 29.8)
  ee_geom3 <- .as_ee_geom(bbox_vec)


  # 4) From data.frame of points
  df <- data.frame(
    lon = c(-82.3, -82.25),
    lat = c(29.65, 29.7)
  )
  ee_geom4 <- .as_ee_geom(df, buffer_m = 1000)
}

}
