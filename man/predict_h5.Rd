% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/predict_h5.R
\name{predict_h5}
\alias{predict_h5}
\title{Model prediction over data.tables using HDF5 file as output}
\usage{
predict_h5(model, dt, output)
}
\arguments{
\item{model}{The trained model object}

\item{dt}{The input data.table to run the model}

\item{output}{The output HDF5 file path}
}
\value{
An \code{\linkS4class{icesat2.predict_h5}}, which is an
h5 file with latitude, longitude and prediction datasets.
}
\description{
Model prediction over a data.table from ATL03 or ATL08 data
containing geolocation data.
It can both append results to an existing HDF5 file or
create a new file, allowing to incrementally add predictions
to the file to avoid memory issues.
}
\examples{
atl03_path <- system.file(
  "extdata",
  "atl03_clip.h5",
  package = "ICESat2VegR"
)

atl03_h5 <- ATL03_read(atl03_path = atl03_path)
atl03_seg_dt <- ATL03_seg_metadata_dt(atl03_h5)

linear_model <- stats::lm(h_ph ~ segment_ph_cnt, data = atl03_seg_dt)
output_h5 <- tempfile(fileext = ".h5")
predicted_h5 <- predict_h5(linear_model, atl03_seg_dt, output_h5)

# List datasets
predicted_h5$ls()$name

# See predicted values
head(predicted_h5[["prediction"]][])

# Close the file
close(predicted_h5)

}
