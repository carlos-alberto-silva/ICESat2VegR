% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/map_tools.R
\name{sample_ATL_granules_by_year}
\alias{sample_ATL_granules_by_year}
\title{Sample ICESat-2 ATL granule URLs by year}
\usage{
sample_ATL_granules_by_year(urls, n_per_year = 5, seed = NULL)
}
\arguments{
\item{urls}{Character vector, matrix, or data frame containing granule URLs
or file paths. If a matrix or data frame is provided, the first column is
used.}

\item{n_per_year}{Integer. Maximum number of URLs to sample per year
(default \code{5}).}

\item{seed}{Optional integer seed passed to \code{set.seed()} to make the
sampling reproducible. If \code{NULL} (default), the random state is
left unchanged.}
}
\value{
A data frame with columns:
\itemize{
\item \code{year}: integer acquisition year.
\item \code{url}: the sampled URL or file path.
}
Rows are ordered by \code{year} and then \code{url}.
}
\description{
Given a vector (or first column of a matrix/data frame) of ICESat-2 ATL03/ATL08
granule URLs or file paths, this function:

\itemize{
\item Attempts to parse the acquisition year from each URL/path.
\item Groups granules by year.
\item Samples up to \code{n_per_year} unique URLs per year.
}

This is useful for creating manageable subsets of ATL granules for testing,
model fitting, or cross-validation.
}
\details{
The year is extracted using the following heuristics:

\enumerate{
\item A path component of the form \verb{/YYYY/} (e.g., \code{.../2020/...}).
\item A filename pattern of the form \verb{ATL0[38]_YYYYMMDD...}.
}

URLs for which no year can be detected are dropped with a warning.
}
\examples{
\dontrun{
  urls <- c(
    "https://example.org/ATL03_20200101000000_001.h5",
    "https://example.org/ATL03_20200102000000_002.h5",
    "https://example.org/ATL03_20210101000000_003.h5"
  )

  sample_df <- ee_sample_atl_granules_by_year(urls, n_per_year = 1, seed = 42)
  sample_df
}

}
