% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ICESat2VegR_configure.R
\name{ICESat2VegR_configure}
\alias{ICESat2VegR_configure}
\title{Configure Python environment for ICESat2VegR cloud features}
\usage{
ICESat2VegR_configure(
  envname = "icesat2-env",
  py_ver = "3.10",
  prefer_conda = TRUE,
  force_conda_forge = TRUE,
  allow_session_installs = TRUE,
  manage_aiobotocore = TRUE,
  auto_restart = TRUE,
  verbose = TRUE,
  quick_probe = c("h5py", "earthaccess", "ee")
)
}
\arguments{
\item{envname}{Character. Name of the conda/virtualenv environment to use or
create. Default is \code{"icesat2-env"}. If this is the default value and
the environment variable \code{CONDA_DEFAULT_ENV} is set, that value is
used instead (useful when running inside an existing conda environment).}

\item{py_ver}{Character. Python version to request when creating a new env
(default \code{"3.10"}).}

\item{prefer_conda}{Logical. If \code{TRUE} (default), use conda/Miniconda.
If \code{FALSE}, a \code{virtualenv} is used instead.}

\item{force_conda_forge}{Logical. If \code{TRUE} (default), configure conda
to use \code{conda-forge} with strict channel priority (recommended).}

\item{allow_session_installs}{Logical. If \code{TRUE} (default) and Python
is already initialized in the current R session, attempt session-only
installs first via \code{reticulate::py_require()} and, if needed, a
pip call from the active interpreter. If that fails, a persistent env
is prepared instead.}

\item{manage_aiobotocore}{Logical. If \code{TRUE} (default), attempt to
detect and resolve common \code{aiobotocore}/\code{botocore}/\code{boto3}
version conflicts by pinning compatible versions and optionally
uninstalling \code{aiobotocore} (which is not required for ICESat2VegR).}

\item{auto_restart}{Logical. If \code{TRUE} (default), attempts to restart
the R session in RStudio via \code{rstudioapi::restartSession()} after
preparing the conda environment, so that the new Python binding is cleanly
established.}

\item{verbose}{Logical. If \code{TRUE} (default), print progress messages.}

\item{quick_probe}{Character vector of Python import names to test for a
fast early exit (default: \code{c("h5py", "earthaccess", "ee")}).}
}
\value{
Logical \code{TRUE} on success, \code{FALSE} otherwise.
}
\description{
This function sets up a robust, persistent Python environment for the
cloud-related features of \strong{ICESat2VegR}, including:
}
\details{
\itemize{
\item Downloading ICESat-2 data via \code{earthaccess}
\item Interfacing with Google Earth Engine via \code{earthengine-api}
\item Handling S3 access via \code{boto3}/\code{botocore}
}

The function:

\itemize{
\item Detects whether Python is already initialized in the R session.
\item Performs a fast "quick probe" to see if required modules are present
(\code{h5py}, \code{earthaccess}, \code{ee} by default).
\item If everything is already available, it returns immediately.
\item Otherwise, it:
\itemize{
\item Ensures Miniconda is installed (if \code{prefer_conda = TRUE}).
\item Creates or reuses a conda environment (default: \code{"icesat2-env"}).
\item Installs required Python modules using conda-forge (and pip fallback).
\item Optionally tries in-session installs if Python is already initialized.
\item Optionally resolves common \code{aiobotocore}/\code{botocore} conflicts.
\item Optionally restarts the R session in RStudio to bind the new env.
}
}

Typical usage is simply:

\preformatted{
  ICESat2VegR_configure()
}

You usually only need to run this:
\itemize{
\item Once per machine, or
\item After major Python / Miniconda changes, or
\item If the package reports missing Python modules.
}
}
\section{Checked/installed Python modules}{


The function checks for the following import names and installs the
corresponding packages when missing:

\tabular{ll}{
\strong{Import name}      \tab \strong{Install name}           \cr
\code{numpy}              \tab \code{numpy}                    \cr
\code{h5py}               \tab \code{h5py}                     \cr
\code{packaging}          \tab \code{packaging}                \cr
\code{ee}                 \tab \code{earthengine-api}          \cr
\code{earthaccess}        \tab \code{earthaccess}              \cr
\code{googleapiclient}    \tab \code{google-api-python-client} \cr
\code{boto3}              \tab \code{boto3}                    \cr
\code{botocore}           \tab \code{botocore}                 \cr
\code{s3transfer}         \tab \code{s3transfer}               \cr
}
}

\examples{
\dontrun{
  # Basic configuration using defaults
  ICESat2VegR_configure()

  # Use existing conda env named "icesat2"
  ICESat2VegR_configure(envname = "icesat2")
}
}
