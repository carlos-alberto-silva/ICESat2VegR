% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/clip.R
\name{clip,icesat2.atl08_h5,SpatExtent-method}
\alias{clip,icesat2.atl08_h5,SpatExtent-method}
\title{Clip ICESat-2 ATL08 HDF5 Data Using a Bounding Extent}
\usage{
\S4method{clip}{icesat2.atl08_h5,SpatExtent}(x, clip_obj, ...)
}
\arguments{
\item{x}{An \code{\linkS4class{icesat2.atl08_h5}} object obtained via
\code{\link[=ATL08_read]{ATL08_read()}}, representing the ATL08 HDF5 file to be clipped.}

\item{clip_obj}{Bounding extent used for clipping. Supported inputs:
\itemize{
\item A numeric vector of length 4:
\code{c(ul_lat, ul_lon, lr_lat, lr_lon)}, following the ICESat-2 CMS
bounding-box convention (upper-left latitude/longitude and
lower-right latitude/longitude).
\item A \code{\link[terra:SpatExtent-class]{terra::SpatExtent}} object.
}}

\item{...}{Additional arguments:
\itemize{
\item \code{output} Character path specifying where the clipped HDF5 file should be
written.
\item \code{beam} Character vector specifying which ATL08 beams to include.
Defaults to:
\code{c("gt1l", "gt2l", "gt3l", "gt1r", "gt2r", "gt3r")}.
\item \code{additional_groups} Character vector specifying additional non-beam
HDF5 groups to copy unchanged into the output file. Defaults to:
\code{c("orbit_info")}.
}}
}
\value{
An S4 object of class \code{\linkS4class{icesat2.atl08_h5}} representing
the clipped ATL08 HDF5 file.
}
\description{
Clips an ICESat-2 ATL08 HDF5 file to a specified spatial extent. Only
segment-level datasets within the ATL08 beam groups are clipped; all metadata,
orbit information, and ancillary groups are preserved unchanged. This
function is the bounding-box-based counterpart to geometry-based clipping
functions.
}
\details{
The function performs the following steps:
\enumerate{
\item Copies file-level attributes and all requested non-beam groups.
\item Clips beam-level datasets based on latitude/longitude coordinates and
the supplied spatial extent.
\item Reconstructs dependent indexing datasets (e.g., photon index ranges)
when necessary to maintain valid ATL08 structure.
}

The resulting HDF5 file remains fully compliant with the ATL08 product
structure, but contains only data within the specified bounding extent.
}
\examples{
# ATL08 file path
atl08_path <- system.file("extdata",
  "atl08_clip.h5",
  package = "ICESat2VegR"
)

# Read ATL08 data
atl08_h5 <- ATL08_read(atl08_path)

# Bounding rectangle coordinates (ul_lat, ul_lon, lr_lat, lr_lon)
ul_lon <- -106.5723
lr_lon <- -106.5693
lr_lat <- 41.533
ul_lat <- 41.537

# Clip ATL08 data using the bounding extent
atl08_clip <- ATL08_h5_clipBox(
  atl08_h5,
  output = tempfile(fileext = ".h5"),
  clip_obj = c(ul_lat, ul_lon, lr_lat, lr_lon)
)

close(atl08_h5)
close(atl08_clip)

}
