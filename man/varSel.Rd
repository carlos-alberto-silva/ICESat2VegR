% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/varSel.R
\name{varSel}
\alias{varSel}
\title{Random Forest Variable Selection (Breiman-only)}
\usage{
varSel(
  xdata,
  ydata,
  imp.scale = c("mir", "se"),
  r = c(0.25, 0.5, 0.75),
  min.imp = NULL,
  seed = NULL,
  parsimony = NULL,
  kappa = FALSE,
  ...
)
}
\arguments{
\item{xdata}{Matrix or data.frame of predictor variables (columns = predictors).}

\item{ydata}{Response vector. For classification, \code{ydata} must be a factor;
otherwise the model is fit in regression mode.}

\item{imp.scale}{Character; type of scaling for importance values, either
\code{mir} or \code{se}. Default is \code{mir}.}

\item{r}{Numeric vector of importance percentiles to test, e.g.,
\code{c(0.25, 0.50, 0.75)}. These percentiles are used to define thresholds
for building nested models during selection.}

\item{min.imp}{Optional numeric in \eqn{[ 0,1 ]} used as a minimum scaled
importance cutoff (in MIR or SE scale) to filter the final set of variables.
Variables whose scaled importance is below this threshold are dropped from
the selected set \code{selvars}. If \code{NULL} (default), no cutoff is
applied after the Murphy-style model selection.}

\item{seed}{Optional integer; sets the random seed in the global R environment.
This is strongly recommended for reproducibility.}

\item{parsimony}{Numeric in (0,1); threshold for selecting among competing
models. If specified, models whose errors are within \code{parsimony} of
the best model (OOB / class error for classification, variance explained /
MSE for regression) are considered, and the one with the fewest parameters
is chosen.}

\item{kappa}{Logical; use the chance-corrected \eqn{\kappa} statistic as the
primary optimization criterion for classification instead of percent
correctly classified (PCC). This corrects PCC for random agreement.}

\item{...}{Additional arguments passed to \code{\link[randomForest:randomForest]{randomForest::randomForest()}},
e.g. \code{ntree = 1000}, \code{replace = TRUE}, \code{proximity = TRUE}.}
}
\value{
An object of class \code{varSel} (a list) with components:
\itemize{
\item \code{selvars} Character vector of selected variable names (after
applying \code{min.imp}, if provided).
\item \code{test} Data.frame of model-selection diagnostics, containing
error metrics, threshold, number of parameters, and the variables used
in each candidate model (for inspection only).
\item \code{importance} Data.frame of scaled importance values for all
variables in the full model (columns \code{parameter}, \code{importance}).
\item \code{sel.importance} Data.frame of scaled importance values for the
selected variables.
\item \code{parameters} List of variables used in each candidate model.
\item \code{scaling} Character; the importance scaling used (\code{mir}
or \code{se}).
}
}
\description{
Implements the Random Forest model selection approach of Murphy et al. (2010),
using Breiman's original \strong{randomForest} implementation. This is a simplified
adaptation of \code{rfUtilities::rf.modelSel}, restricted to the Breiman
implementation and modified for the ICESat2VegR package.

It returns the selected variables and importance metrics, but does not fit
a final model.
}
\details{
For classification, ensure that \code{ydata} is a factor; otherwise the model
is fit in regression mode.

\strong{Selection strategy:}
\itemize{
\item For classification, candidate models are compared using OOB PCC (or
\eqn{\kappa}, if \code{kappa = TRUE}) and maximum within-class error,
with preference for more parsimonious models.
\item For regression, candidate models are compared using percent variance
explained and MSE, with preference for more parsimonious models.
\item After the best model is chosen, the optional \code{min.imp} cutoff is
applied to the scaled importance (MIR/SE) from the full model to remove
weak predictors from the final set \code{selvars}.
}

Typical choices for \code{min.imp}:
\itemize{
\item MIR: \code{min.imp} in \eqn{[0.1, 0.3]} (e.g., keep variables with
at least 20\\% of the maximum importance).
\item SE: \code{min.imp} in \eqn{[0.01, 0.05]}, remembering that SE-scaled
importance values sum to 1.
}
}
\examples{
require(randomForest)

data(airquality)
airquality <- na.omit(airquality)

xdata <- airquality[, 2:6]
ydata <- airquality[, 1]
ntree <- 500
\dontshow{
  # Lightweight version for R CMD check
  xdata <- airquality[1:50, 2:6]
  ydata <- airquality[1:50, 1]
  ntree <- 50
}
## Regression example with MIR scaling and importance cutoff
vs.regress <- varSel(
  xdata     = xdata,
  ydata     = ydata,
  imp.scale = "mir",
  ntree     = ntree,
  min.imp   = 0.2
)

vs.regress$selvars

## Plot all variables, highlighting selected ones
plot(vs.regress, which = "importance")

}
\seealso{
\code{\link[randomForest:randomForest]{randomForest::randomForest()}} and \code{\link[=plot.varSel]{plot.varSel()}}.
}
